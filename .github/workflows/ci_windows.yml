name: ci_windows

env:
  FC: gfortran
  CC: gcc
  CXX: g++

on:
  push:
    paths:
      - "**/CMakeLists.txt"
      - "**.cmake"
      - ".github/workflows/ci_windows.yml"

jobs:

  default:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v2

    - run: ctest -S setup.cmake -VV

  # examples:
    # works but saving CI time
    # runs-on: windows-latest
    # steps:
    # - uses: actions/checkout@v2

    # - run: pip install ninja

    # - run: cmake -BExamples/build -SExamples -GNinja
    # - run: cmake --build Examples/build

    # - run: ctest -V
    #   working-directory: Examples/build

  # msys2:
  # works but saving CI time
  #   runs-on: windows-latest
  #   defaults:
  #     run:
  #       shell: msys2 {0}
  #   steps:
  #   - uses: msys2/setup-msys2@v2
  #     with:
  #       update: true
  #       install: 'git mingw-w64-x86_64-cmake mingw-w64-x86_64-ninja mingw-w64-x86_64-gcc-fortran mingw-w64-x86_64-hdf5'
    # - uses: actions/checkout@v2

    # - run: ctest -S setup.cmake -VV
